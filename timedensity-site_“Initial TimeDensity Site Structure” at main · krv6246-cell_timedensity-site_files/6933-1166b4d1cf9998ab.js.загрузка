performance.mark("js-parse-end:6933-1166b4d1cf9998ab.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["6933"],{471(e,t,n){n.d(t,{_S:()=>i,cB:()=>l,cW:()=>o});var a=n(96551),r=n(95066);let i=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},o=e=>{(0,a.C3)({appId:e})},l=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};r.cg?.addEventListener("hashchange",()=>{(0,a.C3)({appId:l()})},!0)},89495(e,t,n){n.d(t,{Z:()=>a});function a({appendQuery:e,retainScrollPosition:t,returnTarget:n}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:n}}))}},85970(e,t,n){n.d(t,{_:()=>r});var a=n(74848);function r({buttonFocusId:e,buttonHotkey:t,onButtonClick:n,buttonTestLabel:r,onlyAddHotkeyScopeButton:i}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{hidden:!0,"data-testid":r||"","data-hotkey":t,onClick:n,"data-hotkey-scope":e}),!i&&(0,a.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:n})]})}r.displayName="DuplicateOnKeydownButton"},12436(e,t,n){n.d(t,{Ak:()=>p,cD:()=>m,iK:()=>u});var a=n(74848),r=n(9364),i=n(556),o=n(68439),l=n(98632),s=n(96540),c=n(55669);let d=(0,o.A)("localStorage"),u=(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0});function m({children:e,payload:t,openPanelRef:n,action:o}){let m=(0,c.E)(),p="blame"in t,h=(0,r.H)(t),f=(0,s.useCallback)(()=>m?"blame"===o:p,[m,o,p]),g=(0,s.useCallback)(()=>m?"tree"===o:h,[m,o,h]),x=(0,i.i)(),y=(0,s.useRef)(void 0),[_,w]=(0,s.useState)(()=>{let e=d.getItem("codeNavOpen");if(!x&&""!==e&&null!==e||x&&t.symbolsExpanded)return"codeNav"}),v=(f()||g())&&"codeNav"===_?void 0:_;s.useEffect(()=>{n.current=v},[v,n]);let b=(0,s.useCallback)((e,t)=>{w(n=>(n&&y.current&&y.current.focus(),y.current=t,f()||g()&&"codeNav"===e?void 0:e))},[f,g]);!function(e){let{screenSize:t}=(0,l.lm)(),n=(0,s.useRef)(t);(0,s.useEffect)(()=>{let a=n.current>=l.Gy.large,r=n.current===t;t<l.Gy.large&&(a||r)&&e(void 0),n.current=t},[t,e])}(b);let R=(0,s.useMemo)(()=>({openPanel:v,setOpenPanel:b}),[v,b]);return(0,a.jsx)(u,{value:R,children:e})}function p(){return(0,s.use)(u)}u.displayName="OpenPanelContext",m.displayName="OpenPanelProvider"},62655(e,t,n){function a(e){return r(e)[0]}function r(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[a,r]=n.trim().split("=");e===a&&void 0!==r&&t.push({key:a,value:r})}return t}function i(e,t,n=null,a=!1,r="lax"){let o=document.domain;if(null==o)throw Error("Unable to get document domain");o.endsWith(".github.com")&&(o="github.com");let l="https:"===location.protocol?"; secure":"",s=n?`; expires=${n}`:"";!1===a&&(o=`.${o}`);try{document.cookie=`${e}=${t}; path=/; domain=${o}${s}${l}; samesite=${r}`}catch{}}function o(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let a=new Date(Date.now()-1).toUTCString(),r="https:"===location.protocol?"; secure":"",i=`; expires=${a}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${i}${r}`}catch{}}n.d(t,{OR:()=>r,Ri:()=>a,TV:()=>i,Yj:()=>o})},20874(e,t,n){n.d(t,{L:()=>s});var a=n(74848),r=n(16522),i=n(38621),o=n(26108),l=n(34164);n(96540);let s=e=>{let t,n,s,c=(0,r.c)(17),{ref:d,expanded:u,testid:m,ariaLabel:p,ariaControls:h,onToggleExpanded:f,alignment:g,dataHotkey:x,className:y,size:_,tooltipDirection:w,variant:v}=e,b=u?`collapse-${m}`:`expand-${m}`,R=u?"left"===g?i.SidebarExpandIcon:i.SidebarCollapseIcon:"left"===g?i.SidebarCollapseIcon:i.SidebarExpandIcon;c[0]!==f?(t=e=>{f(e)},c[0]=f,c[1]=t):t=c[1];let F=v??"invisible";return c[2]!==y?(n=(0,l.$)(y,"fgColor-muted"),c[2]=y,c[3]=n):n=c[3],c[4]!==h||c[5]!==p||c[6]!==x||c[7]!==u||c[8]!==d||c[9]!==_||c[10]!==b||c[11]!==R||c[12]!==t||c[13]!==F||c[14]!==n||c[15]!==w?(s=(0,a.jsx)(o.K,{"aria-label":p,tooltipDirection:w,ref:d,"data-testid":b,"aria-expanded":u,"aria-controls":h,icon:R,"data-hotkey":x,onClick:t,variant:F,size:_,className:n}),c[4]=h,c[5]=p,c[6]=x,c[7]=u,c[8]=d,c[9]=_,c[10]=b,c[11]=R,c[12]=t,c[13]=F,c[14]=n,c[15]=w,c[16]=s):s=c[16],s};s.displayName="ExpandButton",s.displayName="ExpandButton"},53475(e,t,n){n.d(t,{Uy:()=>M,H:()=>f,qn:()=>ey,c2:()=>ed,Nq:()=>K});var a=n(74848),r=n(16522),i=n(85970),o=n(18888),l=n(20874),s=n(35349),c=n(38621),d=n(21373),u=n(34164),m=n(96540);let p=e=>{let t,n,m,p,h,f,g=(0,r.c)(32),{ref:x,expanded:y,onToggleExpanded:_,className:w,ariaControls:v,textAreaId:b,useFilesButtonBreakpoint:R,variant:F,getTooltipDirection:T}=e,C=void 0===R||R,{toggleTreeShortcut:k}=(0,o.wk)(),{isServer:I}=(0,s.V)();g[0]!==y||g[1]!==T?(t=T?.(y)??"se",g[0]=y,g[1]=T,g[2]=t):t=g[2];let j=t;g[3]!==y||g[4]!==I||g[5]!==_||g[6]!==x||g[7]!==k.hotkey||g[8]!==C||g[9]!==F?(n=C&&(!y||I)&&(0,a.jsx)(d.Q,{"aria-label":"Expand file tree",leadingVisual:c.ArrowLeftIcon,"data-hotkey":k.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:x,onClick:_,variant:F??"invisible",className:"ExpandFileTreeButton-module__Button_1__UeSyAxq",children:"Files"}),g[3]=y,g[4]=I,g[5]=_,g[6]=x,g[7]=k.hotkey,g[8]=C,g[9]=F,g[10]=n):n=g[10];let N=k.hotkey,S=C&&(!y||I);g[11]!==w||g[12]!==S?(m=(0,u.$)(w,"position-relative","ExpandFileTreeButton-module__expandButton__rEZZsDe",{"ExpandFileTreeButton-module__filesButtonBreakpoint__A9ISuMX":S}),g[11]=w,g[12]=S,g[13]=m):m=g[13];let E=y?"Collapse file tree":"Expand file tree";return g[14]!==v||g[15]!==y||g[16]!==_||g[17]!==x||g[18]!==m||g[19]!==E||g[20]!==k.hotkey||g[21]!==j||g[22]!==F?(p=(0,a.jsx)(l.L,{dataHotkey:N,className:m,expanded:y,alignment:"left",ariaLabel:E,tooltipDirection:j,testid:"file-tree-button",ariaControls:v,ref:x,variant:F,onToggleExpanded:_}),g[14]=v,g[15]=y,g[16]=_,g[17]=x,g[18]=m,g[19]=E,g[20]=k.hotkey,g[21]=j,g[22]=F,g[23]=p):p=g[23],g[24]!==_||g[25]!==b||g[26]!==k.hotkey?(h=(0,a.jsx)(i._,{buttonFocusId:b,buttonHotkey:k.hotkey,onButtonClick:_,onlyAddHotkeyScopeButton:!0}),g[24]=_,g[25]=b,g[26]=k.hotkey,g[27]=h):h=g[27],g[28]!==n||g[29]!==p||g[30]!==h?(f=(0,a.jsxs)(a.Fragment,{children:[n,p,h]}),g[28]=n,g[29]=p,g[30]=h,g[31]=f):f=g[31],f};p.displayName="ExpandFileTreeButton",p.displayName="ExpandFileTreeButton";var h=n(77277);function f(e){let t,n,l=(0,r.c)(8),{inputRef:s,onFindFilesShortcut:c,textAreaId:d}=e,{sendRepoKeyDownEvent:u}=(0,h.T)(),{findFilesShortcut:m}=(0,o.wk)();return l[0]!==s||l[1]!==c||l[2]!==u?(t=()=>{c?.(),s?.current?.focus(),u("GO_TO_FILE")},l[0]=s,l[1]=c,l[2]=u,l[3]=t):t=l[3],l[4]!==m.hotkey||l[5]!==t||l[6]!==d?(n=(0,a.jsx)(i._,{buttonFocusId:d,buttonHotkey:m.hotkey,onButtonClick:t}),l[4]=m.hotkey,l[5]=t,l[6]=d,l[7]=n):n=l[7],n}f.displayName="FindFilesShortcut";var g=n(37013),x=n(89001),y=n(68216),_=n(12436),w=n(65513),v=n(70516),b=n(49159),R=n(32764),F=n(91374),T=n(98632),C=n(79008),k=n(29941),I=n(47819),j=n(26108),N=n(87555),S=n(45721),E=n(10095),O=n(63432),P=n(4723);let B=(0,m.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});B.displayName="FileTreeContext";var V=n(68695);async function $(e){let t=await (0,V.lS)(`${e}?noancestors=1`);if(!t.ok)throw Error(`Failed to fetch tree data: ${t.status} ${t.statusText}`);let n=await t.json();return"codeViewTreeWithPathRoute"in n.payload?{tree:{items:n.payload.codeViewTreeWithPathRoute.tree.items,totalCount:n.payload.codeViewTreeWithPathRoute.tree.totalCount}}:"codeViewTreeRoute"in n.payload?{tree:{items:n.payload.codeViewTreeRoute.tree.items,totalCount:n.payload.codeViewTreeRoute.tree.totalCount}}:{tree:{items:n.payload.tree.items,totalCount:n.payload.tree.totalCount}}}let D="ReposFileTreePane-module__HideTree__os1Arl_";var A=n(75474),W=n(58632),G=n(8035),L=n(1703),U=n(58630),H=n(7478);let z=(0,m.createContext)({});function K(e){let t,n,i,o,l,s=(0,r.c)(6),{children:c}=e,d=(0,m.useRef)(!1),u=(0,m.useRef)(!1),p=(0,m.useRef)(!0);s[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{d.current=e},s[0]=t):t=s[0];let h=t;s[1]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{u.current=e},s[1]=n):n=s[1];let f=n;s[2]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{p.current=e},s[2]=i):i=s[2];let g=i;s[3]===Symbol.for("react.memo_cache_sentinel")?(o={expandAllFolders:d,refreshTree:u,shouldFetchFolders:p,setExpandAllFolders:h,setRefreshTree:f,setShouldFetchFolders:g},s[3]=o):o=s[3];let x=o;return s[4]!==c?(l=(0,a.jsx)(z,{value:x,children:c}),s[4]=c,s[5]=l):l=s[5],l}function M(){return(0,m.use)(z)}z.displayName="FileTreeControlContext",K.displayName="FileTreeControlProvider";var q=n(52870);function Z(e,t,n){let a=[];for(let r of t)if(r.startsWith(e)){let t=r.slice(e.length+1),i=t.indexOf("/"),o=i>0?t.slice(0,i):t,l=`${e}/${o}`;if(n&&n.some(e=>e.path===l))continue;let s={items:[],data:{contentType:l===r?"file":"directory",name:o,path:l,isClientOnly:!0}};a.push(s)}return a}function Y(e,t,n){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let a=t.name.slice(0,t.name.lastIndexOf("/")),r=a.indexOf("/")>-1,i={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:a,hasSimplifiedPath:r},o={items:[e],data:i};return(n.set(i.path,o),r)?Y(o,{...i},n):o}function X(e,t,n,a){if(!e)return{newRootItems:n,rootItemsUpdated:!1};let r=!!e[""]&&J("",t,n,e[""].items);for(let r of(a?.(n),Object.keys(e).sort()))if(r){let n=t.get(r);n&&(J(r,t,n.items,e[r].items,a),n.data.totalCount=e[r].totalCount)}return{newRootItems:n,rootItemsUpdated:r}}function J(e,t,n,a,r){let i=!1;for(let o of a){let a=e?`${e}/${o.name}`:o.name;if(!t.get(a)){let e={items:[],data:{...o}};if(t.set(a,e),o.hasSimplifiedPath){let a=Y(e,o,t),l=n.findIndex(e=>e.data.path===a.data.path);-1!==l?a.items.length>n[l].items.length&&(n[l]=a,i=!0):(n.push(a),r?.(n))}else n.push(e),r?.(n)}}return i}function Q(e){let t,n,i,o,l,s,d,u,p,f,g,x,y=(0,r.c)(43),{isActive:_,file:w,onItemSelected:v,getItemUrl:b,selectedItemRef:R,navigate:F,onRenderRow:T,getFileTrailingVisual:C,getFileIcon:k}=e,{sendRepoClickEvent:I}=(0,h.T)(),j=m.useRef(null);y[0]===Symbol.for("react.memo_cache_sentinel")?(t={focusRowRef:j,mouseRowRef:j},y[0]=t):t=y[0];let N=(0,G.Z)(t),S="submodule"===w.data.contentType;y[1]!==w.data||y[2]!==C?(n=C?.(w.data),y[1]=w.data,y[2]=C,y[3]=n):n=y[3];let E=n;y[4]!==w.data||y[5]!==b||y[6]!==_||y[7]!==S||y[8]!==F||y[9]!==v||y[10]!==I?(i=e=>{S?(e.preventDefault(),w.data.submoduleUrl&&(window.location.href=w.data.submoduleUrl)):e.metaKey||e.ctrlKey||1===e.button?(window.open(b(w.data),"_blank"),e.preventDefault()):_?e.preventDefault():(v?.(),I("FILES_TREE.ITEM",{item_path:w.data.path}),F(b(w.data)),e.stopPropagation())},y[4]=w.data,y[5]=b,y[6]=_,y[7]=S,y[8]=F,y[9]=v,y[10]=I,y[11]=i):i=y[11];let O=i;T?.();let P=`${w.data.path}-item`,B=_?void 0:"auto 2rem";y[12]!==w.data||y[13]!==k||y[14]!==S?(o=k?k(w.data):S?(0,a.jsx)(c.FileSubmoduleIcon,{}):(0,a.jsx)(c.FileIcon,{}),y[12]=w.data,y[13]=k,y[14]=S,y[15]=o):o=y[15],y[16]!==o?(l=(0,a.jsx)(U.G.LeadingVisual,{children:o}),y[16]=o,y[17]=l):l=y[17];let V=S?"var(--fgColor-accent, var(--color-accent-fg))":void 0;return y[18]!==V?(s={color:V},y[18]=V,y[19]=s):s=y[19],y[20]!==w.data.name||y[21]!==R||y[22]!==s?(d=(0,a.jsx)("span",{ref:R,style:s,children:w.data.name}),y[20]=w.data.name,y[21]=R,y[22]=s,y[23]=d):d=y[23],y[24]!==w.data.name||y[25]!==N?(u=N&&(0,a.jsx)(W.m,{"data-testid":`${w.data.name}-item-tooltip`,id:`${w.data.name}-item-tooltip`,contentRef:j,"aria-label":w.data.name,open:!0,direction:"ne"}),y[24]=w.data.name,y[25]=N,y[26]=u):u=y[26],y[27]!==d||y[28]!==u?(p=(0,a.jsxs)(a.Fragment,{children:[d,u]}),y[27]=d,y[28]=u,y[29]=p):p=y[29],y[30]!==E?(f=!!E?.screenReaderText&&(0,a.jsx)("span",{className:"sr-only",children:E.screenReaderText}),y[30]=E,y[31]=f):f=y[31],y[32]!==E?(g=!!E?.trailingVisual&&(0,a.jsx)(U.G.TrailingVisual,{children:E.trailingVisual}),y[32]=E,y[33]=g):g=y[33],y[34]!==_||y[35]!==O||y[36]!==p||y[37]!==f||y[38]!==g||y[39]!==P||y[40]!==B||y[41]!==l?(x=(0,a.jsxs)(U.G.Item,{ref:j,onSelect:O,current:_,id:P,containIntrinsicSize:B,children:[l,p,f,g]}),y[34]=_,y[35]=O,y[36]=p,y[37]=f,y[38]=g,y[39]=P,y[40]=B,y[41]=l,y[42]=x):x=y[42],x}Q.displayName="WrappedFileTreeRow";let ee=m.memo(Q);function et({clientOnlyFilePaths:e,directory:t,isActive:n,isAncestorOfActive:r,leadingPath:i="",onItemSelected:o,dispatchKnownFolders:l,getItemUrl:s,getFetchUrl:c,selectedItemRef:d,navigate:u,onRenderRow:p,getFileTrailingVisual:f,getFileIcon:g,navigateOnClick:x=!0}){let{expandAllFolders:y,shouldFetchFolders:_}=M(),[w,v]=(0,m.useState)(y?.current||r),{sendRepoClickEvent:b}=(0,h.T)(),R=m.useRef(null),F=m.useRef(null),T=(0,G.Z)({focusRowRef:F,mouseRowRef:R}),[C,k,I,j,N,S,E]=function(e,t,n){let[a,r]=m.useState(e.items),[i,o]=m.useState(e.data.totalCount||0),[l,s]=m.useState(!1),[c,d]=m.useState(!1),{safeSetTimeout:u}=(0,q.A)();m.useEffect(()=>{r(e.items)},[e.items]),m.useEffect(()=>{void 0!==e.data.totalCount&&o(e.data.totalCount)},[e.data.totalCount]);let p=m.useCallback(()=>{d(!1)},[]),h=m.useCallback((e,t)=>{let n=e||[...a];r(n.slice(0,100)),u(()=>{r(n),void 0!==t&&o(t)},1)},[a,u]);return[m.useCallback(async a=>{let i=new Map;if(e.data.isClientOnly){if(a){let n=Z(e.data.path,a);for(let e of n)i.set(e.data.path,e);t({type:"add",folders:i,processingTime:0}),n.length>100?h(n,n.length):(r(n),o(n.length))}}else{let l=n(e.data);d(!1),s(!0);let c=Date.now();try{let n=await $(l),s=n.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.tree.items.length};return(i.set(e.path,t),e.hasSimplifiedPath)?Y(t,e,i):t});if(a){let t=e.data.path,r=Z(t,a,n.tree.items);for(let e of(s.push(...r),r))i.set(e.data.path,e)}t({type:"add",folders:i,processingTime:Date.now()-c}),e.items=s,e.data.totalCount=n.tree.totalCount,s.length>100?h(s,n.tree.totalCount):(r(s),o(n.tree.totalCount))}catch{d(!0)}}s(!1)},[n,e,t,h]),h,a,l,c,p,i]}(t,l,c),O=E-I.length,P=i?`${i}/`:"";(0,m.useEffect)(()=>{y?.current&&!w&&v(!0)},[t,y,w]);let B=m.useCallback(a=>{y?.current&&(y.current=!1),a&&!w&&!j&&!N&&(t.items.length>100?k():0!==t.items.length||n||r||_?.current===!1||C(e)),a!==w&&v(a)},[y,w,j,N,t.items.length,n,r,_,k,C,e]),V=m.useCallback(e=>{e.metaKey||e.ctrlKey||1===e.button&&x?(window.open(s(t.data),"_blank"),e.preventDefault()):n?e.preventDefault():(o?.(),b("FILES_TREE.ITEM",{item_path:t.data.path}),x?u(s(t.data)):B?.(!w),e.stopPropagation())},[t.data,s,n,w,u,x,o,B,b]);m.useEffect(()=>{r&&!w&&B?.(!0)},[r]),m.useEffect(()=>{0===t.items.length&&w?B?.(!1):!w&&t.autoExpand&&B?.(!0)},[t.items.length]);let D=m.useCallback(e=>{d&&n&&d(e),R.current=e},[d,n]);return 1===t.items.length&&"directory"===t.items[0].data.contentType?(0,a.jsx)(er,{clientOnlyFilePaths:e,directoryItems:t.items,leadingPath:P+t.data.name,inheritsActive:n,dispatchKnownFolders:l,onItemSelected:o,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:x,getFileTrailingVisual:f,getFileIcon:g}):(p?.(),(0,a.jsxs)(U.G.Item,{ref:F,expanded:w,onExpandedChange:B,current:n,onSelect:V,id:`${t.data.path}-item`,containIntrinsicSize:n?void 0:"auto 2rem",children:[(0,a.jsx)(U.G.LeadingVisual,{children:(0,a.jsx)(U.G.DirectoryIcon,{})}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{ref:D,children:[P,t.data.name]}),T&&(0,a.jsx)(W.m,{"data-testid":`${t.data.name}-directory-item-tooltip`,id:`${t.data.name}-directory-item-tooltip`,contentRef:F,"aria-label":`${P}${t.data.name}`,open:!0,direction:"ne"})]}),(0,a.jsx)(U.G.SubTree,{state:j?"loading":N?"error":"done",children:N?(0,a.jsx)(U.G.ErrorDialog,{onRetry:C,onDismiss:S,children:"There was an error loading the folder contents."}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(er,{clientOnlyFilePaths:e,directoryItems:I,dispatchKnownFolders:l,onItemSelected:o,selectedItemRef:d,getItemUrl:s,directoryNavigateOnClick:x,getFileTrailingVisual:f,getFileIcon:g}),O>0&&(0,a.jsx)(eo,{message:`${O} entries not shown`})]})})]}))}ee.displayName="FileTreeRow",et.displayName="WrappedDirectoryTreeRow";let en=m.memo(et);function ea({clientOnlyFilePaths:e,directoryItems:t,leadingPath:n,inheritsActive:r,onItemSelected:i,dispatchKnownFolders:o,selectedItemRef:l,onRenderRow:s,getItemUrl:c,getFileTrailingVisual:d,getFileIcon:u,directoryNavigateOnClick:p=!0}){let{path:h}=(0,A.eu)(),f=(0,w.Z)(),g=(0,L.Z)(),x=m.useRef(g);return(0,a.jsx)(a.Fragment,{children:t.map(t=>{let m=h===t.data.path,g=m||h.startsWith(`${t.data.path}/`);return"directory"===t.data.contentType?(0,a.jsx)(en,{clientOnlyFilePaths:e,isActive:r||m,isAncestorOfActive:g,onItemSelected:i,leadingPath:n,directory:t,dispatchKnownFolders:o,getItemUrl:c,getFetchUrl:f.getItemUrl,selectedItemRef:g?l:void 0,navigate:x.current,onRenderRow:s,navigateOnClick:p,getFileTrailingVisual:d,getFileIcon:u,itemCount:t.items.length},t.data.name):(0,a.jsx)(ee,{onItemSelected:i,file:t,isActive:m,getItemUrl:c,selectedItemRef:m?l:void 0,navigate:x.current,onRenderRow:s,getFileTrailingVisual:d,getFileIcon:u},t.data.name)})})}en.displayName="DirectoryTreeRow",ea.displayName="WrappedDirectoryContents";let er=m.memo(ea);function ei(e){let{clientOnlyFilePaths:t,data:n,rootItems:r,setRootItems:i,fetchError:o,incompleteFileTree:l,processingTime:s,loading:c,onRenderRow:d,getItemUrl:p,getFileTrailingVisual:h,getFileIcon:f,sortDirectoryItems:g}=e,{knownFolders:x,dispatchKnownFolders:y}=(0,m.use)(B),{refreshTree:_}=M();m.useEffect(()=>{if(c)return;let e=new Map,t=[];_?.current||(e=new Map(x),t=r.slice());let{newRootItems:a,rootItemsUpdated:o}=X(n,e,t,g);(a.length>r.length||o||_?.current)&&i(a),(e.size>x.size||_?.current)&&y({type:"set",folders:e,processingTime:s}),_?.current&&(_.current=!1)},[n,c]);let w=m.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{onMouseDown:w,className:(0,u.$)(e.className,"ReposFileTreeView-module__Box__rY5iFZi"),"data-testid":"repos-file-tree-container",children:c?(0,a.jsx)("div",{className:"ReposFileTreeView-module__Box_1__HEpudcb",children:(0,a.jsx)(H.A,{"aria-label":"Loading file tree"})}):(0,a.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,a.jsxs)(U.G,{"aria-label":"Files",children:[o&&(0,a.jsx)(eo,{message:"Some files could not be loaded."}),l&&(0,a.jsx)(eo,{message:"Sign in to see the full file tree."}),(0,a.jsx)(er,{clientOnlyFilePaths:t,directoryItems:r,onItemSelected:e.onItemSelected,dispatchKnownFolders:y,selectedItemRef:e.selectedItemRef,onRenderRow:d,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:p,getFileTrailingVisual:h,getFileIcon:f})]})})})})}function eo(e){let t,n,i=(0,r.c)(3),{message:o}=e,l=o||"Couldn't load.";return i[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,a.jsx)(U.G.LeadingVisual,{children:(0,a.jsx)(E.A,{icon:c.AlertFillIcon,className:"ReposFileTreeView-module__Octicon__bcxNpPv"})}),i[0]=t):t=i[0],i[1]!==l?(n=(0,a.jsxs)(U.G.Item,{id:"error-tree-row",children:[t,(0,a.jsx)("div",{className:"ReposFileTreeView-module__Box_2__Qxi_C9D",children:l})]}),i[1]=l,i[2]=n):n=i[2],n}er.displayName="DirectoryContents",ei.displayName="ReposFileTreeView",eo.displayName="ErrorTreeRow";var el=n(89495);function es(e){let t,n,l,s,d,u=(0,r.c)(16),{sx:m,onClick:p,textAreaId:h}=e,{searchShortcut:f}=(0,o.wk)();return u[0]!==p?(t=e=>{p?.(),(0,el.Z)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})},u[0]=p,u[1]=t):t=u[1],u[2]!==f.hotkey||u[3]!==m||u[4]!==t?(n=(0,a.jsx)(O.K0,{"aria-label":"Search this repository",tooltipDirection:"nw",icon:c.SearchIcon,"data-hotkey":f.hotkey,sx:m,size:"medium",onClick:t,className:"SearchButton-module__IconButton__uGkXY5u"}),u[2]=f.hotkey,u[3]=m,u[4]=t,u[5]=n):n=u[5],u[6]!==p||u[7]!==h?(l=()=>{let e=document.getElementById(h);p?.(),(0,el.Z)({retainScrollPosition:!0,returnTarget:e??void 0})},u[6]=p,u[7]=h,u[8]=l):l=u[8],u[9]!==f.hotkey||u[10]!==l||u[11]!==h?(s=(0,a.jsx)(i._,{buttonFocusId:h,buttonHotkey:f.hotkey,onButtonClick:l,onlyAddHotkeyScopeButton:!0}),u[9]=f.hotkey,u[10]=l,u[11]=h,u[12]=s):s=u[12],u[13]!==n||u[14]!==s?(d=(0,a.jsxs)(a.Fragment,{children:[n,s]}),u[13]=n,u[14]=s,u[15]=d):d=u[15],d}es.displayName="SearchButton";let ec=T.Gy.xxxlarge;function ed({clientOnlyFilePaths:e,collapseTree:t,showTree:n,fileTree:r,treeToggleElement:i,treeToggleRef:o,onItemSelected:l,processingTime:d,searchBoxRef:p,repo:h,path:b,refInfo:V,isFilePath:A,foldersToFetch:W,incompleteFileTree:G,id:L,onFindFilesShortcut:U,textAreaId:H,getItemUrlOverride:z,headerClassName:K,paneClassName:M,paneContentsClassName:q,treeContainerClassName:Z,findFileWorkerPath:Y,headerContent:J,getFileTrailingVisual:Q,getFileIcon:ee,sortDirectoryItems:et,showFindFile:en=!0,directoryNavigateOnClick:ea=!0,showRefSelectorRow:er=!0,paneResizable:eo=!0}){if(en&&void 0===Y)throw Error("findFileWorkerPath must be provided when showFindFile is true");let{openPanel:el}=(0,_.Ak)(),[ed,ep]=m.useState(W.length>0),[eh,ef]=m.useState(!1),eg=m.useRef([]),ex=m.useRef(null),ey=m.useRef(!1),e_=m.useRef(!1),ew=m.useRef(null),{query:ev}=(0,y.JS)(),eb=m.useRef(ev);eb.current=ev;let{codeCenterOption:eR}=(0,C.ud)(),eF=m.useRef(el),{isServer:eT}=(0,s.V)(),{defaultBranch:eC}=(0,v.t)(),{getItemUrl:ek}=(0,w.Z)(),eI=z||ek,ej=[],eN=new Map,eS=m.useRef(ed);!eS.current&&r&&(ej=X(r,eN,[],et).newRootItems),eS.current=!0;let[eE,eO]=m.useReducer(eu,eN),[eP,eB]=m.useState(ej);m.useEffect(()=>{n&&(!ev||window.innerWidth>=T.Gy.large)||(ew.current=null)},[n,ev]),m.useEffect(()=>{el&&eF.current!==el&&window.innerWidth<ec&&t({setPreference:!1}),eF.current=el},[t,el]);let eV=m.useCallback(async e=>{let t=ek({contentType:"directory",path:e,name:e});try{let n=await $(t),a={items:n.tree.items,totalCount:n.tree.totalCount};r[e]=a}catch{ef(!0)}eg.current.push(e),eg.current.length===W.length&&ep(!1)},[r,W.length,ek]);m.useEffect(()=>{if(G)ep(!1);else if(W&&!ey.current)for(let e of W)eV(e);ey.current=!0},[eV,W,G,eE.size]);let e$=m.useCallback(e=>{n&&(!eb.current||window.innerWidth>=T.Gy.large)&&ex.current&&e&&(0,k.Rt)(e,ex.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[n]),eD=m.useCallback(e=>{e&&e_.current?e_.current=!1:ew.current!==e&&e$(e),ew.current=e},[e$]),eA=m.useCallback(e=>{ex.current=e,window.innerWidth>=ec&&e$(ew.current)},[e$]),eW=m.useCallback(e=>{e&&e$(ew.current)},[e$]),{screenSize:eG}=(0,T.lm)(),eL=!eT&&(el&&eG<ec||eG<T.Gy.xlarge)&&eG>=T.Gy.large,eU=m.useCallback(()=>{eL||l(),e_.current=!0},[l,eL]),eH=A?b.substring(0,b.lastIndexOf("/")):b,ez=(0,m.useMemo)(()=>({knownFolders:eE,dispatchKnownFolders:eO}),[eE]),eK=m.useMemo(()=>eT?null:(0,P.KF)(),[eT]),eM=m.useCallback(()=>{window.innerWidth>T.Gy.large&&window.innerWidth<T.Gy.xxxxlarge&&t({setPreference:!1})},[t]),eq=V.name===eC,eZ=(0,a.jsxs)(O.az,{id:L,sx:{maxHeight:"100%",height:"100%",display:"flex",flexDirection:"column","@media screen and (max-width: 768px)":eT?{display:"none"}:void 0,"@media screen and (min-width: 768px)":{maxHeight:"100vh",height:"100vh"}},className:q,children:[(0,a.jsxs)("div",{className:(0,u.$)(K,"ReposFileTreePane-module__Box_1__Y8K4NoF"),children:[J,er&&(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_2__vMQBXFB",children:[(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_3__Hls8HRm",children:eq||void 0===V.fileExistsOnDefault?(0,a.jsx)(x.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0}):(0,a.jsxs)(I.A,{className:"ReposFileTreePane-module__FullWidthButtonGroup__xvY3NwL",children:[V.fileExistsOnDefault?(0,a.jsx)(j.K,{icon:c.ChevronLeftIcon,"aria-label":"View file on default branch",as:F.N,to:(0,R.IO9)({repo:h,commitish:eC,action:"blob",path:b})}):(0,a.jsx)(j.K,{icon:c.ChevronLeftIcon,"aria-label":"View file on default branch",description:"File does not exist on default branch","aria-disabled":!0,inactive:!0}),(0,a.jsx)(x.R,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})]})}),(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_4__RNDhqfw",children:[V.canEdit&&(0,a.jsx)(j.K,{"aria-label":"Add file",tooltipDirection:"n",as:F.N,icon:c.PlusIcon,to:(0,R.IO9)({repo:h,path:eH,commitish:V.name,action:"new"}),onClick:eU,className:"ReposFileTreePane-module__IconButton__mpL2tLd"}),(0,a.jsx)(es,{sx:V.canEdit?{borderTopLeftRadius:0,borderBottomLeftRadius:0}:void 0,onClick:eM,textAreaId:H})]})]})]}),V.currentOid&&en&&Y&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.default,{commitOid:V.currentOid,findFileWorkerPath:Y,onItemSelected:l,searchBoxRef:p,sx:{"@media screen and (max-width: 768px)":eT?{display:"none"}:void 0},className:"ReposFileTreePane-module__FileResultsList__gHLS8F8"}),(0,a.jsx)(f,{inputRef:p,onFindFilesShortcut:U,textAreaId:H})]}),(0,a.jsx)(em,{scrollingRef:ex}),(0,a.jsxs)(O.az,{ref:eA,sx:{"@media screen and (max-width: 768px)":eT?{display:"none"}:void 0},className:"ReposFileTreePane-module__Box_5__sxoA1v3",children:[eT?V.currentOid&&(0,a.jsx)("div",{className:ev?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(ei,{clientOnlyFilePaths:e,data:r,rootItems:eP,selectedItemRef:eD,setRootItems:eB,onItemSelected:eU,processingTime:d,loading:ed,fetchError:eh,incompleteFileTree:G,directoryNavigateOnClick:ea,getItemUrl:eI,className:Z,getFileTrailingVisual:Q,getFileIcon:ee,sortDirectoryItems:et})}):eK&&(0,a.jsx)(P.bL,{node:eK}),!V.currentOid&&!h.isEmpty&&(0,a.jsxs)("div",{className:"ReposFileTreePane-module__Box_6__xTY5mUl",children:[(0,a.jsx)(E.A,{icon:c.AlertFillIcon}),"\xa0Ref is invalid"]})]})]});return(0,a.jsxs)(B,{value:ez,children:[eK&&(0,a.jsx)(P.oj,{node:eK,children:V.currentOid&&(0,a.jsx)("div",{className:ev?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,a.jsx)(ei,{clientOnlyFilePaths:e,data:r,directoryNavigateOnClick:ea,rootItems:eP,selectedItemRef:eD,setRootItems:eB,onItemSelected:eU,processingTime:d,loading:ed,fetchError:eh,incompleteFileTree:G,getItemUrl:eI,className:Z,getFileTrailingVisual:Q,getFileIcon:ee,sortDirectoryItems:et})})}),!n&&eR.enabled&&i&&(0,a.jsx)(O.az,{sx:{"@media screen and (min-width: 1360px)":{display:"block"}},className:"ReposFileTreePane-module__Box_7__RUUksMq",children:i}),(0,a.jsx)(N.O7.Pane,{position:"start",sticky:!0,padding:"none",width:"large",resizable:!!eo,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"none",narrow:"none"},className:(0,u.$)("ReposFileTreePane-module__Pane__G6mCt9A",!n&&D,eL||el?"ReposFileTreePane-module__HidePaneWithTreeOverlay__nxcY9jg":"ReposFileTreePane-module__HidePane__glpb72p",M),children:n&&!eL&&(0,a.jsx)("div",{className:eT?el?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:eZ})}),n&&eL&&eF.current===el&&(0,a.jsx)(S.Ay,{className:(0,u.$)(eT?el?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,"ReposFileTreePane-module__Overlay__Zs4814J",!n&&D),ref:eW,returnFocusRef:o,onClickOutside:eM,onEscape:eM,top:0,position:"fixed",children:(0,a.jsx)(a.Fragment,{children:eZ})})]})}function eu(e,t){switch(t.type){case"set":{let n=e?.size>0;return(0,b.BI)("file-tree",{"fetch-count":n?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":n?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let n=new Map([...e,...t.folders]);return(0,b.BI)("file-tree",{"fetch-count":t.folders.size,"file-count":n.size,"nav-type":"fetch","processing-time":t.processingTime}),n}default:throw Error(`Unknown action type: ${t.type}`)}}function em({scrollingRef:e}){let[t,n]=m.useState(e.current&&e.current.scrollTop>0);return m.useEffect(()=>{if(e.current){let t=e.current,a=()=>{t&&t.scrollTop>0?n(!0):n(!1)};return t.addEventListener("scroll",a),()=>{t.removeEventListener("scroll",a)}}},[e]),t?(0,a.jsx)("div",{className:"ReposFileTreePane-module__Box_8__XoRqKH0"}):null}ed.displayName="ReposFileTreePane",em.displayName="TreeBorder";var ep=n(47698),eh=n(62655),ef=n(556),eg=n(95066),ex=n(46249);function ey(e,t,n,r,i,o="fileTreeExpanded",l){let{sendRepoClickEvent:s}=(0,h.T)(),c=(0,ef.i)(),d=o?(0,eh.Ri)(o):void 0,u=void 0===eg.XC,f=!c&&d&&"false"!==d.value||c&&n;void 0===f&&(f=!1);let g=(0,m.useRef)(null),x=(0,m.useRef)(null),{screenSize:y}=(0,T.lm)(),[_,w]=(0,m.useState)(f),v=(0,m.useRef)(f),b=(0,m.useRef)(!1),R=(0,m.useRef)(!1),F=(0,m.useCallback)(()=>!(t.current&&window.innerWidth>=ec||!t.current&&window.innerWidth>=T.Gy.xlarge),[t]);(0,m.useLayoutEffect)(()=>{let e=F();e||(b.current=!1),w((0,ep.q)()&&y<T.Gy.large&&!R.current||(!e||b.current)&&(c&&_||!c&&d?.value!=="false"))},[b,d?.value,y,t,F,c]),(0,m.useLayoutEffect)(()=>{let e=!t.current&&window.innerWidth<T.Gy.xlarge,n=!t.current&&window.innerWidth>=T.Gy.xlarge;e&&v.current&&!(0,ep.q)()&&_&&w(!1),n&&v.current&&!_&&w(!0)},[t,y]),(0,m.useLayoutEffect)(()=>{let e=t.current&&window.innerWidth<ec,n=t.current&&window.innerWidth>=ec;e&&v.current&&!(0,ep.q)()&&_&&w(!1),n&&v.current&&!_&&w(!0)},[t]);let C=(0,m.useCallback)(e=>{if(w(!0),F()&&(b.current=!0),e?.setPreference&&(i?.(!0),v.current=!0,o)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eh.TV)(o,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>g.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>x.current?.focus())},[o,2592e6,F,i]),k=(0,m.useCallback)(e=>{if(w(!1),b.current=!1,R.current=!0,e?.setPreference&&(i?.(!1),v.current=!1,o)){let e=new Date(Date.now()+2592e6).toUTCString();(0,eh.TV)(o,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>g.current?.focus())},[o,2592e6,i]),I=(0,m.useCallback)(e=>e&&window.innerWidth>=ec||!t.current&&window.innerWidth>=T.Gy.xlarge,[t]),j=(0,m.useMemo)(()=>(0,a.jsx)(ex.A,{as:"h2",className:"use-tree-pane-module__Heading__OiAv1P0",children:(0,a.jsx)(p,{expanded:_,ariaControls:e,onToggleExpanded:()=>{s(_?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),_?k({focus:"toggleButton",setPreference:I(t.current)}):C({focus:"toggleButton",setPreference:I(t.current)})},className:void 0!==d||_||u?void 0:"react-tree-toggle-button-with-indicator",ref:g,textAreaId:r,...l})}),[_,e,d,u,r,l,s,k,I,t,C]);return{isTreeExpanded:_,expandTree:C,collapseTree:k,treeToggleElement:j,treeToggleRef:g,searchBoxRef:x}}},9652(e,t,n){n.d(t,{G:()=>a});let a=e=>({})},79008(e,t,n){n.d(t,{T2:()=>c,cp:()=>h,ud:()=>g});var a=n(74848),r=n(16522),i=n(68439),o=n(96540);let l=(0,i.A)("localStorage"),s="codeView.codeFolding",c="codeView.codeWrapping",d="codeView.centerView",u="codeView.openSymbolsOnClick",m=new Map([[s,"Show code folding buttons"],[c,"Wrap lines"],[d,"Center content"],[u,"Open symbols on click"]]),p=(0,o.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}});p.displayName="CodeViewOptionsContext";let h=e=>{let t,n,i=(0,r.c)(8),{children:o}=e,l=f(s,!0),m=f(c,!1),h=f(d,!1),g=f(u,!0);i[0]!==h||i[1]!==l||i[2]!==m||i[3]!==g?(t={codeFoldingOption:l,codeWrappingOption:m,codeCenterOption:h,openSymbolsOption:g},i[0]=h,i[1]=l,i[2]=m,i[3]=g,i[4]=t):t=i[4];let x=t;return i[5]!==o||i[6]!==x?(n=(0,a.jsx)(p,{value:x,children:o}),i[5]=o,i[6]=x,i[7]=n):n=i[7],n};function f(e,t){let n,a,i,s,c=(0,r.c)(11);c[0]!==e?(n=l.getItem(e),c[0]=e,c[1]=n):n=c[1];let d=n;c[2]!==t||c[3]!==d?(a=()=>d?"true"===d:t,c[2]=t,c[3]=d,c[4]=a):a=c[4];let[u,p]=(0,o.useState)(a);c[5]!==e?(i=m.get(e)||"",c[5]=e,c[6]=i):i=c[6];let h=i;return c[7]!==u||c[8]!==h||c[9]!==e?(s={name:e,enabled:u,setEnabled:p,label:h},c[7]=u,c[8]=h,c[9]=e,c[10]=s):s=c[10],s}function g(){return(0,o.use)(p)}h.displayName="CodeViewOptionsProvider"}}]);
//# sourceMappingURL=6933-1166b4d1cf9998ab-1e161a3b61d1c24d.js.map